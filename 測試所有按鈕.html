<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>按鈕功能測試 - 柑心果園</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Microsoft JhengHei', sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #ff8c42;
            margin-bottom: 30px;
            text-align: center;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .test-section h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 20px;
        }
        .test-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            margin-bottom: 10px;
            background: white;
            border-radius: 6px;
            border-left: 4px solid #ddd;
        }
        .test-item.pass {
            border-left-color: #4caf50;
        }
        .test-item.fail {
            border-left-color: #f44336;
        }
        .test-item.pending {
            border-left-color: #ff9800;
        }
        .test-name {
            flex: 1;
            font-weight: 500;
        }
        .test-status {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        .status-pass {
            background: #4caf50;
            color: white;
        }
        .status-fail {
            background: #f44336;
            color: white;
        }
        .status-pending {
            background: #ff9800;
            color: white;
        }
        .test-button {
            background: #ff8c42;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s;
        }
        .test-button:hover {
            background: #e67a2e;
            transform: translateY(-2px);
        }
        .test-button:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }
        .summary {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 8px;
            margin-top: 30px;
        }
        .summary h3 {
            margin-bottom: 10px;
        }
        .summary-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 15px;
        }
        .stat-item {
            font-size: 24px;
            font-weight: bold;
        }
        .console-output {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        .console-line {
            margin-bottom: 5px;
        }
        .console-success {
            color: #4ec9b0;
        }
        .console-error {
            color: #f48771;
        }
        .console-info {
            color: #569cd6;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧪 柑心果園 - 按鈕功能測試</h1>
        
        <div style="text-align: center; margin-bottom: 30px;">
            <button class="test-button" onclick="runAllTests()">執行所有測試</button>
            <button class="test-button" onclick="clearResults()">清除結果</button>
            <button class="test-button" onclick="openMainSite()">開啟主網站</button>
        </div>

        <!-- 手機選單測試 -->
        <div class="test-section">
            <h2>📱 手機選單按鈕</h2>
            <div class="test-item" id="test-mobile-menu-toggle">
                <span class="test-name">1. 漢堡按鈕 (#mobileMenuToggle)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
            <div class="test-item" id="test-floating-menu">
                <span class="test-name">2. 懸浮選單按鈕 (#floatingMenuBtn)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
        </div>

        <!-- 搜尋功能測試 -->
        <div class="test-section">
            <h2>🔍 搜尋功能</h2>
            <div class="test-item" id="test-search-btn">
                <span class="test-name">3. 搜尋按鈕 (#searchBtn)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
        </div>

        <!-- 購物車測試 -->
        <div class="test-section">
            <h2>🛒 購物車按鈕</h2>
            <div class="test-item" id="test-cart-icon">
                <span class="test-name">4. 購物車圖示 (#cartIcon)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
            <div class="test-item" id="test-floating-cart">
                <span class="test-name">5. 懸浮購物車 (#floatingCartBtn)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
            <div class="test-item" id="test-close-cart">
                <span class="test-name">6. 關閉購物車 (#closeCart)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
            <div class="test-item" id="test-checkout-btn">
                <span class="test-name">7. 前往結帳按鈕 (#checkoutBtn)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
        </div>

        <!-- 商品相關測試 -->
        <div class="test-section">
            <h2>🛍️ 商品功能</h2>
            <div class="test-item" id="test-category-btns">
                <span class="test-name">8. 商品分類按鈕 (.category-btn)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
            <div class="test-item" id="test-products-prev">
                <span class="test-name">9. 商品輪播上一頁 (#productsPrev)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
            <div class="test-item" id="test-products-next">
                <span class="test-name">10. 商品輪播下一頁 (#productsNext)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
        </div>

        <!-- 結帳相關測試 -->
        <div class="test-section">
            <h2>💳 結帳功能</h2>
            <div class="test-item" id="test-close-checkout-modal">
                <span class="test-name">11. 關閉結帳視窗 (#closeCheckoutModal)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
            <div class="test-item" id="test-submit-order">
                <span class="test-name">12. 確認訂單按鈕 (.btn-submit-order)</span>
                <span class="test-status status-pending">待測試</span>
            </div>
        </div>

        <!-- 測試摘要 -->
        <div class="summary">
            <h3>測試摘要</h3>
            <div class="summary-stats">
                <div class="stat-item">
                    <div>✅ 通過</div>
                    <div id="pass-count">0</div>
                </div>
                <div class="stat-item">
                    <div>❌ 失敗</div>
                    <div id="fail-count">0</div>
                </div>
                <div class="stat-item">
                    <div>⏳ 待測</div>
                    <div id="pending-count">12</div>
                </div>
            </div>
        </div>

        <!-- Console 輸出 -->
        <div class="console-output" id="console-output">
            <div class="console-line console-info">準備執行測試...</div>
        </div>
    </div>

    <script>
        let testResults = {
            pass: 0,
            fail: 0,
            pending: 12
        };

        function log(message, type = 'info') {
            const console = document.getElementById('console-output');
            const line = document.createElement('div');
            line.className = `console-line console-${type}`;
            line.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            console.appendChild(line);
            console.scrollTop = console.scrollHeight;
        }

        function updateTestStatus(testId, status) {
            const testItem = document.getElementById(testId);
            const statusSpan = testItem.querySelector('.test-status');
            
            // 移除舊狀態
            testItem.classList.remove('pass', 'fail', 'pending');
            statusSpan.classList.remove('status-pass', 'status-fail', 'status-pending');
            
            // 添加新狀態
            testItem.classList.add(status);
            statusSpan.classList.add(`status-${status}`);
            
            if (status === 'pass') {
                statusSpan.textContent = '✅ 通過';
                testResults.pass++;
                testResults.pending--;
            } else if (status === 'fail') {
                statusSpan.textContent = '❌ 失敗';
                testResults.fail++;
                testResults.pending--;
            }
            
            updateSummary();
        }

        function updateSummary() {
            document.getElementById('pass-count').textContent = testResults.pass;
            document.getElementById('fail-count').textContent = testResults.fail;
            document.getElementById('pending-count').textContent = testResults.pending;
        }

        async function runAllTests() {
            log('開始執行所有測試...', 'info');
            
            // 在新視窗開啟主網站
            const mainWindow = window.open('index.html', '_blank');
            
            if (!mainWindow) {
                log('無法開啟主網站視窗，請允許彈出視窗', 'error');
                return;
            }
            
            log('等待主網站載入...', 'info');
            
            // 等待頁面載入
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            try {
                // 測試 1: 漢堡按鈕
                log('測試 1: 檢查漢堡按鈕...', 'info');
                const mobileMenuToggle = mainWindow.document.getElementById('mobileMenuToggle');
                if (mobileMenuToggle && mobileMenuToggle.getAttribute('type') === 'button') {
                    updateTestStatus('test-mobile-menu-toggle', 'pass');
                    log('✅ 漢堡按鈕存在且 type="button"', 'success');
                } else {
                    updateTestStatus('test-mobile-menu-toggle', 'fail');
                    log('❌ 漢堡按鈕不存在或 type 不正確', 'error');
                }
                
                // 測試 2: 懸浮選單按鈕
                log('測試 2: 檢查懸浮選單按鈕...', 'info');
                const floatingMenuBtn = mainWindow.document.getElementById('floatingMenuBtn');
                if (floatingMenuBtn && floatingMenuBtn.getAttribute('type') === 'button') {
                    updateTestStatus('test-floating-menu', 'pass');
                    log('✅ 懸浮選單按鈕存在且 type="button"', 'success');
                } else {
                    updateTestStatus('test-floating-menu', 'fail');
                    log('❌ 懸浮選單按鈕不存在或 type 不正確', 'error');
                }
                
                // 測試 3: 搜尋按鈕
                log('測試 3: 檢查搜尋按鈕...', 'info');
                const searchBtn = mainWindow.document.getElementById('searchBtn');
                if (searchBtn && searchBtn.getAttribute('type') === 'button') {
                    updateTestStatus('test-search-btn', 'pass');
                    log('✅ 搜尋按鈕存在且 type="button"', 'success');
                } else {
                    updateTestStatus('test-search-btn', 'fail');
                    log('❌ 搜尋按鈕不存在或 type 不正確', 'error');
                }
                
                // 測試 4: 購物車圖示
                log('測試 4: 檢查購物車圖示...', 'info');
                const cartIcon = mainWindow.document.getElementById('cartIcon');
                if (cartIcon) {
                    updateTestStatus('test-cart-icon', 'pass');
                    log('✅ 購物車圖示存在', 'success');
                } else {
                    updateTestStatus('test-cart-icon', 'fail');
                    log('❌ 購物車圖示不存在', 'error');
                }
                
                // 測試 5: 懸浮購物車
                log('測試 5: 檢查懸浮購物車...', 'info');
                const floatingCartBtn = mainWindow.document.getElementById('floatingCartBtn');
                if (floatingCartBtn) {
                    updateTestStatus('test-floating-cart', 'pass');
                    log('✅ 懸浮購物車存在', 'success');
                } else {
                    updateTestStatus('test-floating-cart', 'fail');
                    log('❌ 懸浮購物車不存在', 'error');
                }
                
                // 測試 6: 關閉購物車
                log('測試 6: 檢查關閉購物車按鈕...', 'info');
                const closeCart = mainWindow.document.getElementById('closeCart');
                if (closeCart) {
                    updateTestStatus('test-close-cart', 'pass');
                    log('✅ 關閉購物車按鈕存在', 'success');
                } else {
                    updateTestStatus('test-close-cart', 'fail');
                    log('❌ 關閉購物車按鈕不存在', 'error');
                }
                
                // 測試 7: 前往結帳按鈕
                log('測試 7: 檢查前往結帳按鈕...', 'info');
                const checkoutBtn = mainWindow.document.getElementById('checkoutBtn');
                if (checkoutBtn) {
                    updateTestStatus('test-checkout-btn', 'pass');
                    log('✅ 前往結帳按鈕存在', 'success');
                } else {
                    updateTestStatus('test-checkout-btn', 'fail');
                    log('❌ 前往結帳按鈕不存在', 'error');
                }
                
                // 測試 8: 商品分類按鈕
                log('測試 8: 檢查商品分類按鈕...', 'info');
                const categoryBtns = mainWindow.document.querySelectorAll('.category-btn');
                if (categoryBtns.length > 0) {
                    updateTestStatus('test-category-btns', 'pass');
                    log(`✅ 找到 ${categoryBtns.length} 個分類按鈕`, 'success');
                } else {
                    updateTestStatus('test-category-btns', 'fail');
                    log('❌ 沒有找到分類按鈕', 'error');
                }
                
                // 測試 9: 商品輪播上一頁
                log('測試 9: 檢查商品輪播上一頁...', 'info');
                const productsPrev = mainWindow.document.getElementById('productsPrev');
                if (productsPrev) {
                    updateTestStatus('test-products-prev', 'pass');
                    log('✅ 商品輪播上一頁按鈕存在', 'success');
                } else {
                    updateTestStatus('test-products-prev', 'fail');
                    log('❌ 商品輪播上一頁按鈕不存在', 'error');
                }
                
                // 測試 10: 商品輪播下一頁
                log('測試 10: 檢查商品輪播下一頁...', 'info');
                const productsNext = mainWindow.document.getElementById('productsNext');
                if (productsNext) {
                    updateTestStatus('test-products-next', 'pass');
                    log('✅ 商品輪播下一頁按鈕存在', 'success');
                } else {
                    updateTestStatus('test-products-next', 'fail');
                    log('❌ 商品輪播下一頁按鈕不存在', 'error');
                }
                
                // 測試 11: 關閉結帳視窗
                log('測試 11: 檢查關閉結帳視窗按鈕...', 'info');
                const closeCheckoutModal = mainWindow.document.getElementById('closeCheckoutModal');
                if (closeCheckoutModal) {
                    updateTestStatus('test-close-checkout-modal', 'pass');
                    log('✅ 關閉結帳視窗按鈕存在', 'success');
                } else {
                    updateTestStatus('test-close-checkout-modal', 'fail');
                    log('❌ 關閉結帳視窗按鈕不存在', 'error');
                }
                
                // 測試 12: 確認訂單按鈕
                log('測試 12: 檢查確認訂單按鈕...', 'info');
                const submitOrderBtn = mainWindow.document.querySelector('.btn-submit-order');
                if (submitOrderBtn && submitOrderBtn.getAttribute('type') === 'submit') {
                    updateTestStatus('test-submit-order', 'pass');
                    log('✅ 確認訂單按鈕存在且 type="submit"', 'success');
                } else {
                    updateTestStatus('test-submit-order', 'fail');
                    log('❌ 確認訂單按鈕不存在或 type 不正確', 'error');
                }
                
                log('所有測試完成！', 'success');
                
            } catch (error) {
                log(`測試過程發生錯誤: ${error.message}`, 'error');
            }
        }

        function clearResults() {
            testResults = { pass: 0, fail: 0, pending: 12 };
            
            // 重置所有測試項目
            document.querySelectorAll('.test-item').forEach(item => {
                item.classList.remove('pass', 'fail');
                item.classList.add('pending');
                const statusSpan = item.querySelector('.test-status');
                statusSpan.className = 'test-status status-pending';
                statusSpan.textContent = '待測試';
            });
            
            updateSummary();
            
            // 清除 console
            document.getElementById('console-output').innerHTML = '<div class="console-line console-info">準備執行測試...</div>';
            
            log('測試結果已清除', 'info');
        }

        function openMainSite() {
            window.open('index.html', '_blank');
        }
    </script>
</body>
</html>
