# 🚀 柑心果園網站全面重構計畫

## 📋 專案目標

### 核心需求
1. ✅ 統一化頁頭/頁尾/選單/購物車到所有分頁
2. ✅ 圖片使用不同資料夾管理，結構清晰
3. ✅ 建立後台管理系統（Google Sheets + GAS）
4. ✅ 可上傳圖片、內容、自動更新到前端
5. ✅ 移除舊檔案，全面統一管理
6. ✅ SEO 效益分析頁面

---

## 🏗️ 新架構設計

### 1. 檔案結構（重組後）

```
ganxin-orchard/
│
├── index.html                    # 首頁
├── 其他頁面.html                 # 各分頁（使用統一模板）
│
├── templates/                    # ⭐ NEW - 統一模板
│   ├── header.html              # 統一頁頭
│   ├── footer.html              # 統一頁尾  
│   ├── navigation.html          # 統一選單
│   └── cart-widget.html         # 統一購物車
│
├── css/                         # ✅ 已建立模組化
│   ├── main.css
│   ├── layout/
│   └── components/
│
├── js/                          # JavaScript
│   ├── template-loader.js       # ⭐ NEW - 載入統一模板
│   ├── seo-manager.js          # ✅ 已建立
│   ├── backend-sync.js         # ⭐ NEW - 後台同步
│   └── ...其他功能
│
├── images/                      # ⭐ 重組圖片資料夾
│   ├── hero/                   # 封面圖（對應 Drive ID）
│   ├── logo/                   # Logo（對應 Drive ID）
│   ├── products/               # 商品圖
│   │   ├── ponkan/            # 椪柑
│   │   ├── murcott/           # 茂谷柑
│   │   ├── taro/              # 芋頭
│   │   └── water-chestnut/    # 菱角
│   ├── pages/                  # 各頁面專用圖
│   │   ├── about/
│   │   ├── news/
│   │   ├── season/
│   │   └── guide/
│   └── common/                 # 共用圖片
│
├── backend/                     # ⭐ NEW - 後台管理
│   ├── admin.html              # 後台管理介面
│   ├── seo-dashboard.html      # SEO 效益分析
│   └── config.json             # 配置檔
│
├── data/                        # ⭐ NEW - 資料檔案
│   ├── pages-config.json       # 頁面配置
│   ├── products.json           # 商品資料
│   └── content.json            # 內容資料
│
└── docs/                        # 文檔（已有）
    ├── 使用說明.md
    └── API文檔.md
```

---

## 🎯 實作階段

### 階段 1：建立統一模板系統 ⏳
- [ ] 創建 `templates/` 資料夾
- [ ] 提取頁頭/頁尾/選單/購物車為獨立模板
- [ ] 建立 `template-loader.js` 動態載入
- [ ] 測試模板系統

### 階段 2：重組圖片資料夾 ⏳
- [ ] 建立新的圖片資料夾結構
- [ ] 移動現有圖片到對應資料夾
- [ ] 建立圖片命名規範
- [ ] 更新 HTML 中的圖片路徑

### 階段 3：建立後台管理系統 ⏳
- [ ] 建立 Google Sheets 資料表
- [ ] 撰寫 GAS 後台腳本
- [ ] 建立圖片上傳功能
- [ ] 實作自動同步機制

### 階段 4：統一所有 HTML 頁面 ⏳
- [ ] 移除所有頁面的內嵌 CSS（已規劃）
- [ ] 套用統一模板
- [ ] 整合 SEO 管理器
- [ ] 測試所有頁面

### 階段 5：建立 SEO 分析頁面 ⏳
- [ ] 建立 SEO Dashboard
- [ ] 整合 Google Analytics 數據
- [ ] 建立效益追蹤
- [ ] 報表視覺化

### 階段 6：清理舊檔案 ⏳
- [ ] 備份舊檔案
- [ ] 移除重複/過時的檔案
- [ ] 更新文檔
- [ ] 最終測試

---

## 📊 統一元件清單

### 需要統一的元件

| 元件 | 當前狀態 | 統一方案 | 優先級 |
|------|---------|---------|--------|
| **頁頭** | 每頁重複 | `templates/header.html` | 🔴 高 |
| **頁尾** | 每頁重複 | `templates/footer.html` | 🔴 高 |
| **選單** | 每頁重複 | `templates/navigation.html` | 🔴 高 |
| **購物車** | 每頁重複 | `templates/cart-widget.html` | 🔴 高 |
| **SEO 標籤** | 每頁重複 | `js/seo-manager.js` | 🟡 中 |
| **CSS** | 內嵌重複 | `css/main.css` 已建立 | ✅ 完成 |
| **圖片** | 混亂 | 資料夾重組 | 🔴 高 |
| **內容** | 寫死在 HTML | 後台管理 | 🟡 中 |

---

## 🗂️ 圖片資料夾對應表

### Google Drive 資料夾 → 本地資料夾

| Drive 資料夾 | Drive ID | 本地路徑 | 用途 |
|-------------|----------|---------|------|
| **hero** | 1lzkIBXSeIgizJf8K6NT54B9cPoaZRhFV | `images/hero/` | 封面圖 |
| **logo** | 1cRQPgc1XuwFMXzpepfrSGsNJG3TOF3oT | `images/logo/` | Logo |
| **常溫** | 14X6WbIQd6mAiLOEE_h73mkXdQL1gu0mM | `images/products/ambient/` | 常溫商品 |
| **冷藏** | 1vo3Zbwt008r684mAm9nakghTO2zojWmf | `images/products/refrigerated/` | 冷藏商品 |
| **冷凍** | 1IETjj7n9nlQGsrCho_zxF81p4OWLCvWZ | `images/products/frozen/` | 冷凍商品 |

### 新增本地資料夾

| 本地路徑 | 用途 | 建議命名規則 |
|---------|------|-------------|
| `images/pages/about/` | 關於我們頁面圖片 | `about-{描述}-{日期}.jpg` |
| `images/pages/news/` | 最新消息圖片 | `news-{日期}-{標題}.jpg` |
| `images/pages/season/` | 產季頁面圖片 | `season-{產品}-{日期}.jpg` |
| `images/pages/guide/` | 指南頁面圖片 | `guide-{主題}-{編號}.jpg` |
| `images/common/` | 共用圖片 | `common-{用途}.jpg` |

---

## 🔧 技術實作方案

### 1. 統一模板載入系統

#### template-loader.js
```javascript
// 動態載入統一模板
class TemplateLoader {
    async loadTemplate(templateName) {
        const response = await fetch(`/templates/${templateName}.html`);
        return await response.text();
    }
    
    async initPage() {
        // 載入頁頭
        document.querySelector('#header-placeholder')
            .innerHTML = await this.loadTemplate('header');
        
        // 載入頁尾
        document.querySelector('#footer-placeholder')
            .innerHTML = await this.loadTemplate('footer');
        
        // 初始化選單、購物車等
    }
}
```

#### HTML 使用方式
```html
<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="./css/main.css">
</head>
<body>
    <!-- 統一頁頭 -->
    <div id="header-placeholder"></div>
    
    <!-- 頁面內容 -->
    <main>
        <h1>頁面內容</h1>
    </main>
    
    <!-- 統一頁尾 -->
    <div id="footer-placeholder"></div>
    
    <!-- 載入模板 -->
    <script src="./js/template-loader.js"></script>
    <script src="./js/seo-manager.js"></script>
</body>
</html>
```

---

### 2. 後台管理系統

#### Google Sheets 結構

**工作表 1：頁面管理**
| 頁面ID | 頁面名稱 | 標題 | 描述 | 關鍵字 | 封面圖 | 狀態 | 更新時間 |
|--------|---------|------|------|--------|--------|------|----------|
| index | 首頁 | ... | ... | ... | hero/main.jpg | 啟用 | 2025-01-23 |

**工作表 2：圖片管理**
| 圖片ID | 檔案名稱 | 分類 | Drive資料夾 | 本地路徑 | 上傳日期 | 狀態 |
|--------|---------|------|------------|----------|----------|------|
| IMG001 | logo.png | logo | logo | images/logo/ | 2025-01-23 | 已同步 |

**工作表 3：商品管理**
| 商品ID | 商品名稱 | 分類 | 價格 | 圖片 | 描述 | 庫存 | 狀態 |
|--------|---------|------|------|------|------|------|------|
| PROD001 | 特級椪柑 | 常溫 | 600 | ... | ... | 100 | 上架 |

#### GAS 後台功能
```javascript
// 1. 圖片上傳 Drive
function uploadImageToDrive(file, folderType) {
    const folderIds = {
        'hero': '1lzkIBXSeIgizJf8K6NT54B9cPoaZRhFV',
        'logo': '1cRQPgc1XuwFMXzpepfrSGsNJG3TOF3oT',
        'ambient': '14X6WbIQd6mAiLOEE_h73mkXdQL1gu0mM'
    };
    // 上傳邏輯
}

// 2. 同步到前端
function syncToFrontend() {
    // 生成 JSON 檔案
    // 觸發 GitHub Actions 部署
}

// 3. 手動更新按鈕
function manualUpdate() {
    // 檢查更新
    // 同步資料
    // 回報狀態
}
```

---

### 3. SEO 效益分析頁面

#### seo-dashboard.html
```html
<div class="seo-dashboard">
    <h1>SEO 效益分析</h1>
    
    <!-- 總覽 -->
    <div class="overview">
        <div class="metric">
            <h3>總流量</h3>
            <p class="value">12,345</p>
            <span class="change">+15%</span>
        </div>
    </div>
    
    <!-- 關鍵字排名 -->
    <div class="keywords">
        <h2>關鍵字排名</h2>
        <table>...</table>
    </div>
    
    <!-- 頁面表現 -->
    <div class="pages">
        <h2>頁面表現</h2>
        <chart>...</chart>
    </div>
</div>
```

---

## 📝 命名規範

### 圖片命名規則
```
格式：{類別}-{描述}-{日期/編號}.{副檔名}

範例：
- hero-homepage-20250123.jpg
- product-ponkan-premium-001.jpg
- logo-main-color.png
- page-about-team-photo.jpg
```

### HTML 檔案規則
```
格式：{功能}-{子類別}.html

範例：
- index.html (首頁)
- products.html (商品列表)
- product-detail.html (商品詳情)
- season-ponkan.html (椪柑產季)
```

---

## ⏱️ 時程規劃

| 階段 | 工作內容 | 預估時間 | 狀態 |
|------|---------|---------|------|
| 1 | 建立統一模板系統 | 2-3 小時 | ⏳ 準備中 |
| 2 | 重組圖片資料夾 | 1-2 小時 | ⏳ 準備中 |
| 3 | 建立後台管理系統 | 3-4 小時 | ⏳ 準備中 |
| 4 | 統一所有 HTML 頁面 | 2-3 小時 | ⏳ 準備中 |
| 5 | 建立 SEO 分析頁面 | 2 小時 | ⏳ 準備中 |
| 6 | 清理舊檔案 | 1 小時 | ⏳ 準備中 |
| **總計** | | **11-15 小時** | |

---

## 🎯 優先執行順序

### 第一優先（立即執行）
1. ✅ 建立統一模板系統
2. ✅ 重組圖片資料夾結構
3. ✅ 更新 5 個主要頁面

### 第二優先（後續執行）
4. ⏳ 建立後台管理系統
5. ⏳ 整合所有頁面
6. ⏳ SEO 分析頁面

### 第三優先（優化階段）
7. ⏳ 效能優化
8. ⏳ 測試與修正
9. ⏳ 文檔完善

---

## 📦 可移除的舊檔案

### 備份檔（可刪除）
- `about-backup-20251021-190421.html`
- `about-backup.html`
- `season.html.backup`
- `temp_season_original.html`

### 過時的 CSS（已統一）
- `news-season-styles.css`
- `season-styles.css`
- `unified-mobile-menu.css`
- `unified-styles.css`

### 舊的文檔（已更新）
- 修復報告（多個）
- 舊的 README

---

## 🚀 開始執行

**準備好開始了嗎？**

我將按照以下順序執行：

1. **立即開始**：建立統一模板系統
2. **接著**：重組圖片資料夾
3. **然後**：建立後台管理
4. **最後**：整合所有頁面

---

**預計完成時間**：11-15 小時  
**預期效果**：
- ✅ 統一管理，修改一處全站生效
- ✅ 圖片分類清晰，易於管理
- ✅ 後台管理，無需修改程式碼
- ✅ SEO 可視化，效益追蹤
- ✅ 程式碼精簡 70%

**是否開始執行？** 🚀
