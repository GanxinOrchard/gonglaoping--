# æŸ‘å¿ƒæœåœ’ - è³¼ç‰©è»Šèˆ‡çµå¸³ç³»çµ±æ•´åˆè¨­å®šèªªæ˜

## ğŸ“‹ å·²å®Œæˆçš„åŠŸèƒ½ä¿®æ­£

### âœ… 1. æ‡¸æµ®è³¼ç‰©è»Šæ•¸å­—é¡¯ç¤º
- **å•é¡Œ**ï¼šåŠ å…¥å•†å“æ™‚æ‡¸æµ®è³¼ç‰©è»ŠæŒ‰éˆ•çš„æ•¸å­—ä¸æœƒæ›´æ–°
- **è§£æ±º**ï¼šä¿®æ”¹ `js/cart.js` çš„ `updateCartUI()` å‡½æ•¸ï¼Œç¾åœ¨æœƒåŒæ™‚æ›´æ–°æ‰€æœ‰è³¼ç‰©è»Šæ•¸é‡æ¨™è¨˜
- **ä½ç½®**ï¼šç¬¬ 167 è¡Œ

### âœ… 2. è³¼ç‰©è»Šé é¢ Logo
- **å•é¡Œ**ï¼šè³¼ç‰©è»Šé é¢å·¦ä¸Šè§’æ²’æœ‰é¡¯ç¤º logo
- **è§£æ±º**ï¼šè³¼ç‰©è»Šé é¢ (`cart.html`) å·²ç¶“æœ‰å®Œæ•´çš„ headerï¼ŒåŒ…å« logo å’Œè³¼ç‰©è»Šåœ–ç¤º
- **ä½ç½®**ï¼šcart.html ç¬¬ 310-327 è¡Œ

### âœ… 3. çµå¸³æ­¥é©ŸæŒ‡ç¤ºå™¨
- **å•é¡Œ**ï¼šæ­¥é©Ÿé †åºéœ€è¦èª¿æ•´
- **è§£æ±º**ï¼šå·²æ›´æ–°ç‚ºï¼š
  - æ­¥é©Ÿ 1ï¼šè³¼ç‰©æ¸…å–®
  - æ­¥é©Ÿ 2ï¼šå¯„é€ä»˜æ¬¾æ–¹å¼
  - æ­¥é©Ÿ 3ï¼šå®Œæˆè¨‚å–®
- **ä½ç½®**ï¼šcheckout.html ç¬¬ 535-548 è¡Œ

### âœ… 4. æ‰‹æ©Ÿç‰ˆè³¼ç‰©è»Šæ’ç‰ˆ
- **å•é¡Œ**ï¼šæ‰‹æ©Ÿç‰ˆå•†å“åœ–ç‰‡å’Œæ–‡å­—é‡ç–Š
- **è§£æ±º**ï¼šèª¿æ•´ç‚ºå‚ç›´æ’åˆ—ï¼Œåœ–ç‰‡ã€è³‡è¨Šã€æ§åˆ¶æŒ‰éˆ•åˆ†é–‹é¡¯ç¤º
- **ä½ç½®**ï¼šcart.html ç¬¬ 292-331 è¡Œï¼ˆéŸ¿æ‡‰å¼ CSSï¼‰

### âœ… 5. è¨‚å–®æ‘˜è¦é¡¯ç¤º
- **å•é¡Œ**ï¼šçµå¸³é é¢æ²’æœ‰é¡¯ç¤ºå•†å“ç¸½é‡‘é¡å’Œè¨‚å–®ç¸½è¨ˆ
- **è§£æ±º**ï¼šè¨‚å–®æ‘˜è¦å·²åŒ…å«ï¼š
  - å•†å“ç¸½é‡‘é¡
  - æŠ˜æ‰£å„ªæƒ ï¼ˆå¦‚æœ‰ï¼‰
  - é‹è²»
  - è¨‚å–®ç¸½è¨ˆ
- **ä½ç½®**ï¼šcheckout.html ç¬¬ 583-598 è¡Œ

### âœ… 6. çµå¸³é é¢é †åº
- **å•é¡Œ**ï¼šéœ€è¦èª¿æ•´ç‚ºæŠ˜æ‰£ç¢¼ã€è¨‚å–®æ‘˜è¦ã€é…é€æ–¹å¼çš„é †åº
- **è§£æ±º**ï¼šå·²é‡æ–°æ’åˆ—ç¬¬ä¸€æ­¥é©Ÿçš„å€å¡Šé †åº
- **ä½ç½®**ï¼šcheckout.html ç¬¬ 554-627 è¡Œ

### âœ… 7. é‹è²»å‹•æ…‹è¨ˆç®—
- **å•é¡Œ**ï¼šé‹è²»éœ€è¦æ ¹æ“šé…é€æ–¹å¼å’ŒæŠ˜æ‰£å¾Œé‡‘é¡å‹•æ…‹è®ŠåŒ–
- **è§£æ±º**ï¼š
  - è‡ªå–ï¼šé‹è²» = 0
  - å®…é…ï¼šæŠ˜æ‰£å¾Œé‡‘é¡ â‰¥ NT$1,800 å…é‹ï¼Œå¦å‰‡ NT$180
- **ä½ç½®**ï¼šjs/checkout.js ç¬¬ 104-128 è¡Œ

### âœ… 8. LINE Pay èˆ‡ GAS æ•´åˆ
- **å•é¡Œ**ï¼šéœ€è¦æ•´åˆ LINE Pay ä»˜æ¬¾å’Œ Google Sheets è¨‚å–®è¨˜éŒ„
- **è§£æ±º**ï¼š
  - å‰µå»ºç¨ç«‹çš„ LINE Pay é é¢ (`linepay.html`)
  - æ•´åˆ GAS è¨‚å–®æäº¤åŠŸèƒ½
  - é¸æ“‡ LINE Pay æ™‚æœƒè·³è½‰åˆ°å°ˆç”¨é é¢
- **ä½ç½®**ï¼šjs/checkout.js ç¬¬ 440-495 è¡Œ

---

## ğŸ”§ éœ€è¦è¨­å®šçš„é …ç›®

### 1. Google Apps Script (GAS) è¨­å®š

#### æ­¥é©Ÿ 1ï¼šå»ºç«‹ Google è©¦ç®—è¡¨
1. å‰å¾€ [Google Sheets](https://sheets.google.com)
2. å»ºç«‹æ–°è©¦ç®—è¡¨ï¼Œå‘½åç‚ºã€ŒæŸ‘å¿ƒæœåœ’è¨‚å–®ç®¡ç†ã€
3. è¤‡è£½è©¦ç®—è¡¨ IDï¼ˆåœ¨ç¶²å€åˆ—ä¸­ï¼‰
   ```
   https://docs.google.com/spreadsheets/d/[é€™è£¡æ˜¯è©¦ç®—è¡¨ID]/edit
   ```

#### æ­¥é©Ÿ 2ï¼šè¨­å®š Apps Script
1. åœ¨è©¦ç®—è¡¨ä¸­ï¼Œé»é¸ã€Œæ“´å……åŠŸèƒ½ã€â†’ã€ŒApps Scriptã€
2. åˆªé™¤é è¨­ä»£ç¢¼ï¼Œè²¼ä¸Š `GAS-Backend.gs` çš„å…§å®¹
3. ä¿®æ”¹ä»¥ä¸‹è¨­å®šï¼š
   ```javascript
   const SPREADSHEET_ID = 'æ‚¨çš„è©¦ç®—è¡¨ID';
   const ADMIN_EMAIL = 'your-email@example.com'; // ç®¡ç†å“¡ Email
   ```

#### æ­¥é©Ÿ 3ï¼šéƒ¨ç½²ç‚º Web App
1. é»é¸ã€Œéƒ¨ç½²ã€â†’ã€Œæ–°å¢éƒ¨ç½²ä½œæ¥­ã€
2. é¸æ“‡é¡å‹ï¼šã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ã€
3. è¨­å®šï¼š
   - èªªæ˜ï¼šæŸ‘å¿ƒæœåœ’è¨‚å–®ç³»çµ± API
   - åŸ·è¡Œèº«åˆ†ï¼šæˆ‘
   - å…·æœ‰å­˜å–æ¬Šçš„ä½¿ç”¨è€…ï¼šä»»ä½•äºº
4. é»é¸ã€Œéƒ¨ç½²ã€
5. è¤‡è£½ã€Œç¶²é æ‡‰ç”¨ç¨‹å¼ URLã€

#### æ­¥é©Ÿ 4ï¼šæ›´æ–°å‰ç«¯ä»£ç¢¼
åœ¨ `js/checkout.js` ç¬¬ 441 è¡Œï¼Œå°‡ URL æ›¿æ›ç‚ºæ‚¨çš„ GAS URLï¼š
```javascript
const GAS_WEB_APP_URL = 'æ‚¨çš„GAS_WEB_APP_URL';
```

---

### 2. LINE Pay è¨­å®š

#### æ­¥é©Ÿ 1ï¼šè¨»å†Š LINE Pay Merchant
1. å‰å¾€ [LINE Pay Merchant è¨»å†Šé é¢](https://pay.line.me/tw/merchants/signup)
2. å¡«å¯«å•†å®¶è³‡è¨Šä¸¦æäº¤ç”³è«‹
3. ç­‰å¾…å¯©æ ¸é€šéï¼ˆç´„ 3-5 å€‹å·¥ä½œå¤©ï¼‰

#### æ­¥é©Ÿ 2ï¼šå–å¾— API é‡‘é‘°
1. ç™»å…¥ [LINE Pay Merchant Console](https://pay.line.me/portal/tw/main)
2. å‰å¾€ã€ŒAPI é‡‘é‘°ç®¡ç†ã€
3. è¨˜éŒ„ä»¥ä¸‹è³‡è¨Šï¼š
   - Channel ID
   - Channel Secret Key

#### æ­¥é©Ÿ 3ï¼šè¨­å®šå¾Œç«¯ API
LINE Pay éœ€è¦å¾Œç«¯ä¼ºæœå™¨è™•ç†ä»˜æ¬¾è«‹æ±‚ï¼Œå»ºè­°ä½¿ç”¨ä»¥ä¸‹æ–¹æ¡ˆä¹‹ä¸€ï¼š

**æ–¹æ¡ˆ Aï¼šä½¿ç”¨ Node.js + Express**
```javascript
// ç¯„ä¾‹ä»£ç¢¼ï¼ˆéœ€è¦åœ¨ä¼ºæœå™¨ç«¯åŸ·è¡Œï¼‰
const express = require('express');
const crypto = require('crypto');
const axios = require('axios');

const app = express();
const CHANNEL_ID = 'YOUR_CHANNEL_ID';
const CHANNEL_SECRET = 'YOUR_CHANNEL_SECRET';

app.post('/api/linepay/request', async (req, res) => {
  const { orderId, amount, productName } = req.body;
  
  const requestBody = {
    amount: amount,
    currency: 'TWD',
    orderId: orderId,
    packages: [{
      id: orderId,
      amount: amount,
      products: [{
        name: productName,
        quantity: 1,
        price: amount
      }]
    }],
    redirectUrls: {
      confirmUrl: 'https://your-domain.com/linepay/confirm',
      cancelUrl: 'https://your-domain.com/cart.html'
    }
  };
  
  // ç”Ÿæˆç°½ç« 
  const nonce = Date.now().toString();
  const signature = crypto
    .createHmac('sha256', CHANNEL_SECRET)
    .update(CHANNEL_SECRET + '/v3/payments/request' + JSON.stringify(requestBody) + nonce)
    .digest('base64');
  
  try {
    const response = await axios.post(
      'https://sandbox-api-pay.line.me/v3/payments/request',
      requestBody,
      {
        headers: {
          'Content-Type': 'application/json',
          'X-LINE-ChannelId': CHANNEL_ID,
          'X-LINE-Authorization-Nonce': nonce,
          'X-LINE-Authorization': signature
        }
      }
    );
    
    res.json(response.data);
  } catch (error) {
    res.status(500).json({ error: error.message });
  }
});

app.listen(3000);
```

**æ–¹æ¡ˆ Bï¼šä½¿ç”¨ Google Cloud Functions**
å¯ä»¥å°‡ä¸Šè¿°é‚è¼¯éƒ¨ç½²åˆ° Google Cloud Functionsï¼Œç„¡éœ€ç¶­è­·ä¼ºæœå™¨ã€‚

#### æ­¥é©Ÿ 4ï¼šæ›´æ–°å‰ç«¯ä»£ç¢¼
ä¿®æ”¹ `linepay.html` çš„ `handleLinePayment()` å‡½æ•¸ï¼Œå‘¼å«æ‚¨çš„å¾Œç«¯ APIã€‚

---

## ğŸ“ æ¸¬è©¦æ¸…å–®

### è³¼ç‰©è»ŠåŠŸèƒ½
- [ ] åŠ å…¥å•†å“å¾Œï¼Œæ‡¸æµ®è³¼ç‰©è»Šæ•¸å­—æ­£ç¢ºé¡¯ç¤º
- [ ] é»æ“Šæ‡¸æµ®è³¼ç‰©è»ŠæŒ‰éˆ•ï¼Œè·³è½‰åˆ°è³¼ç‰©è»Šé é¢
- [ ] è³¼ç‰©è»Šé é¢é¡¯ç¤º logo
- [ ] æ‰‹æ©Ÿç‰ˆå•†å“æ’ç‰ˆæ­£ç¢ºï¼Œç„¡é‡ç–Š

### çµå¸³æµç¨‹
- [ ] æ­¥é©ŸæŒ‡ç¤ºå™¨é¡¯ç¤ºï¼šè³¼ç‰©æ¸…å–® â†’ å¯„é€ä»˜æ¬¾æ–¹å¼ â†’ å®Œæˆè¨‚å–®
- [ ] ç¬¬ä¸€æ­¥é †åºï¼šæŠ˜æ‰£ç¢¼ â†’ è¨‚å–®æ‘˜è¦ â†’ é…é€æ–¹å¼
- [ ] è¨‚å–®æ‘˜è¦é¡¯ç¤ºï¼šå•†å“ç¸½é‡‘é¡ã€æŠ˜æ‰£ã€é‹è²»ã€è¨‚å–®ç¸½è¨ˆ
- [ ] å¥—ç”¨æŠ˜æ‰£ç¢¼å¾Œï¼Œé‡‘é¡æ­£ç¢ºæ›´æ–°
- [ ] é¸æ“‡è‡ªå–ï¼Œé‹è²»é¡¯ç¤ºç‚º 0
- [ ] é¸æ“‡å®…é…ä¸”é‡‘é¡ < NT$1,800ï¼Œé‹è²»é¡¯ç¤º NT$180
- [ ] é¸æ“‡å®…é…ä¸”é‡‘é¡ â‰¥ NT$1,800ï¼Œé‹è²»é¡¯ç¤ºå…é‹è²»

### ä»˜æ¬¾æµç¨‹
- [ ] é¸æ“‡éŠ€è¡Œè½‰å¸³ï¼Œæ­£å¸¸å®Œæˆè¨‚å–®
- [ ] é¸æ“‡è‡ªå–ç¾é‡‘ï¼Œæ­£å¸¸å®Œæˆè¨‚å–®
- [ ] é¸æ“‡ LINE Payï¼Œè·³è½‰åˆ° LINE Pay é é¢
- [ ] LINE Pay é é¢é¡¯ç¤ºæ­£ç¢ºçš„è¨‚å–®è³‡è¨Šå’Œé‡‘é¡

### GAS æ•´åˆï¼ˆéœ€å…ˆè¨­å®šï¼‰
- [ ] è¨‚å–®æˆåŠŸæäº¤åˆ° Google Sheets
- [ ] è©¦ç®—è¡¨ä¸­é¡¯ç¤ºå®Œæ•´è¨‚å–®è³‡è¨Š
- [ ] å®¢æˆ¶æ”¶åˆ°è¨‚å–®ç¢ºèª Email
- [ ] ç®¡ç†å“¡æ”¶åˆ°æ–°è¨‚å–®é€šçŸ¥ Email

---

## ğŸš€ éƒ¨ç½²å»ºè­°

### 1. æœ¬åœ°æ¸¬è©¦
ä½¿ç”¨ Live Server æˆ–é¡ä¼¼å·¥å…·åœ¨æœ¬åœ°æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½ã€‚

### 2. éƒ¨ç½²åˆ° GitHub Pages
```bash
git add .
git commit -m "æ›´æ–°è³¼ç‰©è»Šå’Œçµå¸³ç³»çµ±"
git push origin main
```

### 3. è¨­å®šè‡ªè¨‚ç¶²åŸŸï¼ˆé¸ç”¨ï¼‰
åœ¨ GitHub Pages è¨­å®šä¸­ç¶å®šæ‚¨çš„ç¶²åŸŸã€‚

---

## ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚æœ‰ä»»ä½•å•é¡Œï¼Œè«‹æª¢æŸ¥ï¼š
1. ç€è¦½å™¨æ§åˆ¶å°æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯
2. GAS URL æ˜¯å¦æ­£ç¢ºè¨­å®š
3. LINE Pay API é‡‘é‘°æ˜¯å¦æ­£ç¢º

---

## ğŸ“„ ç›¸é—œæª”æ¡ˆ

- `js/cart.js` - è³¼ç‰©è»Šæ ¸å¿ƒé‚è¼¯
- `js/checkout.js` - çµå¸³æµç¨‹é‚è¼¯
- `cart.html` - è³¼ç‰©è»Šé é¢
- `checkout.html` - çµå¸³é é¢
- `linepay.html` - LINE Pay ä»˜æ¬¾é é¢
- `order-complete.html` - è¨‚å–®å®Œæˆé é¢
- `GAS-Backend.gs` - Google Apps Script å¾Œç«¯ä»£ç¢¼

---

æœ€å¾Œæ›´æ–°ï¼š2025-10-08
