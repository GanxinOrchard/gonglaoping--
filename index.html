<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>柑心果園 - 優質農產品直銷平台</title>
    <meta name="description" content="柑心果園提供新鮮優質的台灣在地農產品，產地直送，安心購買">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta http-equiv="Cache-Control" content="public, max-age=31536000">
    <link rel="preload" href="./css/style.css" as="style">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" as="style">
    <link rel="preload" href="./js/main.js" as="script">
    <link rel="preload" href="./js/products.js" as="script">
    <link rel="preload" href="./js/cart.js" as="script">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"></noscript>
</head>
<body>
    <!-- 導航欄 -->
    <header class="header">
        <div class="top-bar">
            <div class="container">
                <div class="top-bar-content">
                    <div class="contact-info">
                        <span><i class="fas fa-phone"></i> 客服專線：0800-123-456</span>
                        <span><i class="fas fa-clock"></i> 服務時間：週一至週五 09:00-18:00</span>
                    </div>
                    <div class="user-actions">
                        <a href="#" class="btn-login"><i class="fas fa-user"></i> 登入</a>
                        <a href="#" class="btn-register">註冊</a>
                    </div>
                </div>
            </div>
        </div>
        
        <nav class="navbar">
            <div class="container">
                <div class="nav-content">
                    <div class="logo">
                        <a href="index.html">
                            <img src="https://raw.githubusercontent.com/GanxinOrchard/gonglaoping/main/%E6%9F%91%E5%BF%83%E6%9E%9C%E5%9C%92LOGO.png" alt="柑心果園" loading="lazy" width="180" height="60" onerror="this.src='./images/logo-placeholder.png'" fetchpriority="high">
                        </a>
                    </div>
                    
                    <div class="search-bar">
                        <input type="text" placeholder="搜尋商品..." id="searchInput">
                        <button type="button" id="searchBtn"><i class="fas fa-search"></i></button>
                    </div>
                    
                    <div class="nav-icons">
                        <a href="#" class="cart-icon" id="cartIcon">
                            <i class="fas fa-shopping-cart"></i>
                            <span class="cart-count" id="cartCount">0</span>
                        </a>
                        <button class="mobile-menu-toggle" id="mobileMenuToggle">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </div>
                
                <div class="main-menu" id="mainMenu">
                    <ul>
                        <li><a href="index.html" class="active">首頁</a></li>
                        <li class="dropdown">
                            <a href="#products">全部商品 <i class="fas fa-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="#products">所有商品</a></li>
                                <li><a href="product-detail.html">商品詳情</a></li>
                            </ul>
                        </li>
                        <li><a href="about.html">關於我們</a></li>
                        <li><a href="news.html">最新消息</a></li>
                        <li><a href="knowledge.html">常見問題</a></li>
                        <li><a href="contact.html">聯絡我們</a></li>
                        <li><a href="order-tracking.html">訂單查詢</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- 主視覺輪播 -->
    <section class="hero-slider">
        <div class="slider-container">
            <div class="slide active">
                <img src="https://raw.githubusercontent.com/GanxinOrchard/gonglaoping/main/%E6%9F%91%E5%BF%83%E6%9E%9C%E5%9C%92%E8%B2%A9%E8%B3%A3%E6%89%80.png" alt="柑心果園販賣所" onerror="this.src='https://via.placeholder.com/1920x600/ff8c42/ffffff?text=柑心果園'">
                <div class="slide-content">
                    <h1>柑心果園</h1>
                    <p>新鮮優質 · 產地直送 · 安心購買</p>
                    <a href="#products" class="btn-primary">立即選購</a>
                </div>
            </div>
        </div>
    </section>

    <!-- 品牌特色 -->
    <section class="features">
        <div class="container">
            <div class="features-grid">
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <h3>友善農友</h3>
                    <p>平台無抽成、無上架費用，由農友自行定價，降低消費者購買金額</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-seedling"></i>
                    </div>
                    <h3>友善環境</h3>
                    <p>生態保育、產地直送、降低碳排，落實良好農業規範</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-certificate"></i>
                    </div>
                    <h3>安全驗證</h3>
                    <p>商品通過安全驗證報告，讓您買得安心，守護健康</p>
                </div>
                <div class="feature-item">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3>安心保障</h3>
                    <p>專人客服、換貨服務，24小時內回應問題</p>
                </div>
            </div>
        </div>
    </section>

    <!-- 商品分類區 -->
    <section class="category-section">
        <div class="container">
            <h2 class="section-title">熱門分類</h2>
            <div class="category-grid">
                <a href="#gift-section" class="category-card">
                    <img src="https://via.placeholder.com/300x200/ff8c42/ffffff?text=禮盒專區" alt="禮盒專區">
                    <h3>禮盒專區</h3>
                </a>
                <a href="#fruit-section" class="category-card">
                    <img src="https://via.placeholder.com/300x200/ff8c42/ffffff?text=優質水果" alt="優質水果">
                    <h3>優質水果</h3>
                </a>
                <a href="#vegetable-section" class="category-card">
                    <img src="https://via.placeholder.com/300x200/ff8c42/ffffff?text=新鮮蔬菜" alt="新鮮蔬菜">
                    <h3>新鮮蔬菜</h3>
                </a>
                <a href="#grain-section" class="category-card">
                    <img src="https://via.placeholder.com/300x200/ff8c42/ffffff?text=米、雜糧" alt="米、雜糧">
                    <h3>米、雜糧</h3>
                </a>
                <a href="#processed-section" class="category-card">
                    <img src="https://via.placeholder.com/300x200/ff8c42/ffffff?text=加工食品" alt="加工食品">
                    <h3>加工食品</h3>
                </a>
                <a href="#tea-section" class="category-card">
                    <img src="https://via.placeholder.com/300x200/ff8c42/ffffff?text=茶葉飲品" alt="茶葉飲品">
                    <h3>茶葉飲品</h3>
                </a>
            </div>
        </div>
    </section>

    <!-- 商品列表 -->
    <section class="products-section" id="products">
        <div class="container">
            <h2 class="section-title">精選商品</h2>
            <div class="products-grid" id="productsGrid">
                <!-- 商品將由 JavaScript 動態載入 -->
            </div>
        </div>
    </section>

    <!-- 購物車側邊欄 -->
    <div class="cart-sidebar" id="cartSidebar">
        <div class="cart-header">
            <h3>購物車</h3>
            <button class="close-cart" id="closeCart">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- 購物車項目將由 JavaScript 動態載入 -->
        </div>
        <div class="cart-footer">
            <div class="discount-code">
                <input type="text" id="discountCode" placeholder="輸入折扣碼">
                <button id="applyDiscount">套用</button>
            </div>
            <div class="discount-info" id="discountInfo"></div>
            <div class="cart-total">
                <div class="subtotal">
                    <span>小計：</span>
                    <span id="subtotal">NT$ 0</span>
                </div>
                <div class="discount-amount" id="discountAmount" style="display: none;">
                    <span>折扣：</span>
                    <span id="discountValue">-NT$ 0</span>
                </div>
                <div class="total">
                    <span>總計：</span>
                    <span id="total">NT$ 0</span>
                </div>
            </div>
            <button class="btn-checkout" id="checkoutBtn">前往結帳</button>
        </div>
    </div>

    <!-- 結帳彈窗 -->
    <div class="modal" id="checkoutModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>結帳資訊</h3>
                <button class="close-modal" id="closeCheckoutModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="checkoutForm">
                    <div class="form-group">
                        <label for="customerName">姓名 *</label>
                        <input type="text" id="customerName" required>
                    </div>
                    <div class="form-group">
                        <label for="customerPhone">電話 *</label>
                        <input type="tel" id="customerPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="customerEmail">Email *</label>
                        <input type="email" id="customerEmail" required>
                    </div>
                    <div class="form-group">
                        <label for="customerAddress">配送地址 *</label>
                        <textarea id="customerAddress" rows="3" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="customerNote">備註</label>
                        <textarea id="customerNote" rows="2"></textarea>
                    </div>
                    <div class="order-summary">
                        <h4>訂單摘要</h4>
                        <div id="checkoutSummary"></div>
                        <div class="checkout-total">
                            <span>總金額：</span>
                            <span id="checkoutTotal">NT$ 0</span>
                        </div>
                    </div>
                    <div class="payment-methods">
                        <h4>付款方式</h4>
                        <label class="payment-option">
                            <input type="radio" name="payment" value="linepay" checked>
                            <span><i class="fab fa-line"></i> LINE Pay</span>
                        </label>
                        <label class="payment-option">
                            <input type="radio" name="payment" value="cod">
                            <span><i class="fas fa-money-bill-wave"></i> 貨到付款</span>
                        </label>
                    </div>
                    <button type="submit" class="btn-submit-order">確認訂單並付款</button>
                </form>
            </div>
        </div>
    </div>

    <!-- 頁尾 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>關於柑心果園</h4>
                    <p>我們致力於提供最新鮮、最優質的台灣在地農產品，從產地直送到您家，讓您吃得安心、健康。</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-line"></i></a>
                        <a href="#"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>客戶服務</h4>
                    <ul>
                        <li><a href="#faq">常見問題</a></li>
                        <li><a href="#shipping">配送說明</a></li>
                        <li><a href="#return">退換貨政策</a></li>
                        <li><a href="#privacy">隱私權政策</a></li>
                        <li><a href="#terms">服務條款</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>購物指南</h4>
                    <ul>
                        <li><a href="#how-to-order">如何訂購</a></li>
                        <li><a href="#payment">付款方式</a></li>
                        <li><a href="#member">會員權益</a></li>
                        <li><a href="#points">點數說明</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>聯絡我們</h4>
                    <ul class="contact-list">
                        <li><i class="fas fa-phone"></i> 0800-123-456</li>
                        <li><i class="fas fa-envelope"></i> service@ganxin-orchard.com</li>
                        <li><i class="fas fa-map-marker-alt"></i> 台灣台北市信義區</li>
                        <li><i class="fas fa-clock"></i> 週一至週五 09:00-18:00</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 柑心果園 Ganxin Orchard. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="./js/products.js" defer></script>
    <script src="./js/cart.js" defer></script>
    <script src="./js/checkout.js" defer></script>
    <script src="./js/main.js" defer></script>
    <script>
    // 圖片懶加載功能
    document.addEventListener('DOMContentLoaded', function() {
        const lazyImages = [].slice.call(document.querySelectorAll('img.lazy'));
        
        if ('IntersectionObserver' in window) {
            let lazyImageObserver = new IntersectionObserver(function(entries, observer) {
                entries.forEach(function(entry) {
                    if (entry.isIntersecting) {
                        let lazyImage = entry.target;
                        lazyImage.src = lazyImage.dataset.src;
                        lazyImage.classList.remove('lazy');
                        lazyImageObserver.unobserve(lazyImage);
                    }
                });
            });

            lazyImages.forEach(function(lazyImage) {
                lazyImageObserver.observe(lazyImage);
            });
        } else {
            // 不支援 IntersectionObserver 的備用方案
            let active = false;
            const lazyLoad = function() {
                if (active === false) {
                    active = true;
                    setTimeout(function() {
                        lazyImages.forEach(function(lazyImage) {
                            if ((lazyImage.getBoundingClientRect().top <= window.innerHeight && 
                                lazyImage.getBoundingClientRect().bottom >= 0) &&
                                getComputedStyle(lazyImage).display !== 'none') {
                                lazyImage.src = lazyImage.dataset.src;
                                lazyImage.classList.remove('lazy');
                                lazyImages = lazyImages.filter(function(image) {
                                    return image !== lazyImage;
                                });
                                if (lazyImages.length === 0) {
                                    document.removeEventListener('scroll', lazyLoad);
                                    window.removeEventListener('resize', lazyLoad);
                                    window.removeEventListener('orientationchange', lazyLoad);
                                }
                            }
                        });
                        active = false;
                    }, 200);
                }
            };

            document.addEventListener('scroll', lazyLoad);
            window.addEventListener('resize', lazyLoad);
            window.addEventListener('orientationchange', lazyLoad);
            lazyLoad();
        }
    });
    </script>
</body>
</html>
