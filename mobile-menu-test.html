<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‰‹æ©Ÿé¸å–®æ¸¬è©¦é é¢ - æŸ‘å¿ƒæœåœ’</title>
    <link rel="stylesheet" href="./css/style.css">
    <link rel="stylesheet" href="./css/mobile-menu-fix.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            padding-top: 100px;
        }
        .test-section {
            padding: 40px 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        .test-card {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        .test-card h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
        }
        .test-card ul {
            list-style: none;
            padding: 0;
        }
        .test-card li {
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        .test-card li:last-child {
            border-bottom: none;
        }
        .test-card li::before {
            content: "âœ“ ";
            color: #4caf50;
            font-weight: bold;
            margin-right: 10px;
        }
        .status-indicator {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            margin-top: 15px;
        }
        .status-pass {
            background: #4caf50;
            color: white;
        }
        .status-fail {
            background: #f44336;
            color: white;
        }
        .test-button {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }
        .test-button:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }
        #testResults {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            display: none;
        }
        .result-item {
            padding: 8px 0;
            font-family: monospace;
        }
        .result-pass {
            color: #4caf50;
        }
        .result-fail {
            color: #f44336;
        }
    </style>
</head>
<body>
    <!-- è·‘é¦¬ç‡ˆ -->
    <div class="announcement-bar">
        <div class="announcement-content">
            <i class="fas fa-bullhorn"></i>
            <span>ğŸ§ª æ‰‹æ©Ÿé¸å–®æ¸¬è©¦é é¢ - è«‹åœ¨æ‰‹æ©Ÿæˆ–é–‹ç™¼è€…å·¥å…·çš„è¡Œå‹•æ¨¡æ“¬æ¨¡å¼ä¸‹æ¸¬è©¦</span>
        </div>
    </div>
    
    <!-- å°èˆªæ¬„ -->
    <header class="header">
        <nav class="navbar">
            <div class="container">
                <div class="nav-content">
                    <div class="logo">
                        <a href="index.html">
                            <img src="./images/å•†æ¨™.jpg" alt="æŸ‘å¿ƒæœåœ’" width="180" height="60">
                        </a>
                    </div>
                    
                    <div class="nav-icons">
                        <button type="button" class="mobile-menu-toggle" id="mobileMenuToggle" aria-controls="mainMenu" aria-expanded="false" aria-label="é–‹å•Ÿé¸å–®">
                            <i class="fas fa-bars"></i>
                        </button>
                    </div>
                </div>
                
                <div class="main-menu" id="mainMenu">
                    <ul>
                        <li><a href="index.html">é¦–é </a></li>
                        <li><a href="news.html">æœ€æ–°æ¶ˆæ¯</a></li>
                        <li class="dropdown">
                            <a href="javascript:void(0)">æœ¬å­£åš´é¸ <i class="fas fa-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="season-recommend.html">ç•¶å­£æ¨è–¦</a></li>
                                <li><a href="season-ponkan.html">æ¤ªæŸ‘ç”¢å­£</a></li>
                                <li><a href="season-murcott.html">èŒ‚è°·æŸ‘ç”¢å­£</a></li>
                            </ul>
                        </li>
                        <li class="dropdown">
                            <a href="javascript:void(0)">å…¨éƒ¨å•†å“ <i class="fas fa-chevron-down"></i></a>
                            <ul class="dropdown-menu">
                                <li><a href="products.html?category=å„ªè³ªæ°´æœ">å„ªè³ªæ°´æœ</a></li>
                                <li><a href="products.html?category=æ–°é®®è”¬æœ">æ–°é®®è”¬æœ</a></li>
                                <li><a href="products.html?category=å†·å‡é£Ÿå“">å†·å‡é£Ÿå“</a></li>
                            </ul>
                        </li>
                        <li><a href="about.html">é—œæ–¼æˆ‘å€‘</a></li>
                        <li><a href="contact.html">è¯çµ¡æˆ‘å€‘</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>

    <!-- æ‡¸æµ® Menu æŒ‰éˆ• -->
    <button type="button" class="floating-menu-btn" id="floatingMenuBtn" aria-controls="mainMenu" aria-expanded="false" aria-label="é–‹å•Ÿé¸å–®">
        <i class="fas fa-bars"></i>
    </button>

    <!-- æ¸¬è©¦å…§å®¹ -->
    <main class="test-section">
        <div class="test-card">
            <h2>ğŸ“± æ‰‹æ©Ÿé¸å–®ä¿®å¾©æ¸¬è©¦</h2>
            <p><strong>æ¸¬è©¦ç’°å¢ƒï¼š</strong>è«‹åœ¨ iOS Safariã€Android Chrome æˆ–ç€è¦½å™¨çš„è¡Œå‹•æ¨¡æ“¬æ¨¡å¼ä¸‹æ¸¬è©¦</p>
            <p><strong>è¢å¹•å¯¬åº¦ï¼š</strong><span id="screenWidth"></span>px</p>
        </div>

        <div class="test-card">
            <h2>âœ… é©—æ”¶æ¨™æº–</h2>
            <ul>
                <li>é»æ“Šæ¼¢å ¡æŒ‰éˆ•ï¼Œé¸å–®å¾å³å´æ»‘å…¥</li>
                <li>é¸å–®æ‰“é–‹æ™‚ï¼ŒæŒ‰éˆ•åœ–ç¤ºè®Šæˆ âœ•</li>
                <li>é»æ“Šé¸å–®å¤–éƒ¨ï¼ˆé®ç½©ï¼‰ï¼Œé¸å–®é—œé–‰</li>
                <li>é»æ“Šé¸å–®å…§éƒ¨ï¼Œé¸å–®ä¸é—œé–‰</li>
                <li>é»æ“Šä¸‹æ‹‰é¸å–®ï¼Œå­é¸å–®å±•é–‹/æ”¶åˆ</li>
                <li>é»æ“Šé¸å–®å…§çš„é€£çµï¼Œé¸å–®è‡ªå‹•é—œé–‰ä¸¦å°èˆª</li>
                <li>æŒ‰ ESC éµï¼Œé¸å–®é—œé–‰</li>
                <li>é€£çºŒå¿«é€Ÿé»æ“Šæ¼¢å ¡æŒ‰éˆ•ï¼Œä¸æœƒå‡ºç¾ç•°å¸¸</li>
                <li>åœ¨ iOS å’Œ Android ä¸Šéƒ½èƒ½ 100% è§¸ç™¼</li>
                <li>æ²’æœ‰ã€Œç¬é–“æ‰“é–‹åˆé—œé–‰ã€çš„å•é¡Œ</li>
            </ul>
        </div>

        <div class="test-card">
            <h2>ğŸ§ª è‡ªå‹•æ¸¬è©¦</h2>
            <button class="test-button" onclick="runTests()">åŸ·è¡Œè‡ªå‹•æ¸¬è©¦</button>
            <button class="test-button" onclick="testRapidClick()">æ¸¬è©¦å¿«é€Ÿé»æ“Š</button>
            <button class="test-button" onclick="clearResults()">æ¸…é™¤çµæœ</button>
            <div id="testResults"></div>
        </div>

        <div class="test-card">
            <h2>ğŸ” å•é¡Œæ’æŸ¥æ¸…å–®</h2>
            <ul>
                <li>æª¢æŸ¥æŒ‰éˆ•æ˜¯å¦æœ‰ type="button" å±¬æ€§</li>
                <li>æª¢æŸ¥æ˜¯å¦æœ‰ aria-expanded å±¬æ€§</li>
                <li>æª¢æŸ¥ z-index å±¤ç´šæ˜¯å¦æ­£ç¢º</li>
                <li>æª¢æŸ¥æ˜¯å¦æœ‰é‡è¤‡çš„äº‹ä»¶ç›£è½å™¨</li>
                <li>æª¢æŸ¥é»æ“Šå¤–éƒ¨é—œé–‰çš„å»¶é²æ˜¯å¦è¶³å¤ </li>
                <li>æª¢æŸ¥æ˜¯å¦æœ‰ stopPropagation() é˜»æ­¢å†’æ³¡</li>
                <li>æª¢æŸ¥ transform å‹•ç•«æ˜¯å¦æµæš¢</li>
                <li>æª¢æŸ¥æ˜¯å¦æœ‰ -webkit-tap-highlight-color</li>
            </ul>
        </div>

        <div class="test-card">
            <h2>ğŸ“ åŸå› åˆ†æ</h2>
            <h3>ç‚ºä»€éº¼åŸç«™æœƒã€Œå¶ç™¼å¤±æ•—ã€ï¼Ÿ</h3>
            <ol style="padding-left: 20px;">
                <li><strong>äº‹ä»¶è¡çªï¼š</strong>ä½¿ç”¨ cloneNode() é‡è¤‡ç¶å®šäº‹ä»¶ï¼Œå°è‡´äº‹ä»¶ç›£è½å™¨å¤±æ•ˆæˆ–é‡è¤‡è§¸ç™¼</li>
                <li><strong>æ™‚åºå•é¡Œï¼š</strong>é»æ“Šå¤–éƒ¨é—œé–‰çš„äº‹ä»¶åœ¨é¸å–®æ‰“é–‹ç¬é–“å°±è¢«ç¶å®šï¼Œå°è‡´ç«‹å³è§¸ç™¼é—œé–‰</li>
                <li><strong>z-index æ··äº‚ï¼š</strong>å¤šå€‹å…ƒç´ çš„ z-index è¨­å®šä¸æ˜ç¢ºï¼Œå°è‡´æŒ‰éˆ•è¢«å…¶ä»–å…ƒç´ é®æ“‹</li>
                <li><strong>ç¼ºå°‘é˜²æŠ–ï¼š</strong>æ²’æœ‰ isAnimating æ¨™è¨˜ï¼Œå¿«é€Ÿé»æ“Šæœƒå°è‡´ç‹€æ…‹æ··äº‚</li>
                <li><strong>è§¸æ§å„ªåŒ–ä¸è¶³ï¼š</strong>ç¼ºå°‘ -webkit-tap-highlight-color å’Œ touch-action è¨­å®š</li>
            </ol>
        </div>

        <div class="test-card">
            <h2>âœ¨ ä¿®å¾©æ–¹æ¡ˆ</h2>
            <ol style="padding-left: 20px;">
                <li><strong>ç§»é™¤ cloneNodeï¼š</strong>ç›´æ¥ç¶å®šäº‹ä»¶ï¼Œä¸é‡è¤‡å‰µå»ºç¯€é»</li>
                <li><strong>å»¶é²ç¶å®šå¤–éƒ¨é»æ“Šï¼š</strong>ä½¿ç”¨ setTimeout å»¶é² 300ms ç¶å®šå¤–éƒ¨é»æ“Šäº‹ä»¶</li>
                <li><strong>æ˜ç¢º z-indexï¼š</strong>è¨­å®šæ¸…æ™°çš„å±¤ç´šï¼šæ¼¢å ¡(1001) > æŠ½å±œ(1000) > é®ç½©(999)</li>
                <li><strong>æ·»åŠ å‹•ç•«é–ï¼š</strong>ä½¿ç”¨ isAnimating æ¨™è¨˜é˜²æ­¢å‹•ç•«æœŸé–“çš„é‡è¤‡æ“ä½œ</li>
                <li><strong>è§¸æ§å„ªåŒ–ï¼š</strong>æ·»åŠ  -webkit-tap-highlight-color å’Œ touch-action</li>
                <li><strong>ä½¿ç”¨ type="button"ï¼š</strong>é˜²æ­¢æŒ‰éˆ•è§¸ç™¼è¡¨å–®æäº¤</li>
                <li><strong>æ·»åŠ  stopPropagationï¼š</strong>é˜²æ­¢äº‹ä»¶å†’æ³¡å°è‡´çš„èª¤è§¸ç™¼</li>
            </ol>
        </div>
    </main>

    <script src="./js/mobile-menu-fix.js"></script>
    <script>
        // é¡¯ç¤ºè¢å¹•å¯¬åº¦
        function updateScreenWidth() {
            document.getElementById('screenWidth').textContent = window.innerWidth;
        }
        updateScreenWidth();
        window.addEventListener('resize', updateScreenWidth);

        // è‡ªå‹•æ¸¬è©¦
        function runTests() {
            const results = document.getElementById('testResults');
            results.style.display = 'block';
            results.innerHTML = '<h3>æ¸¬è©¦çµæœï¼š</h3>';
            
            const tests = [
                {
                    name: 'æŒ‰éˆ•æ˜¯å¦æœ‰ type="button"',
                    test: () => {
                        const btn = document.getElementById('mobileMenuToggle');
                        return btn && btn.getAttribute('type') === 'button';
                    }
                },
                {
                    name: 'æŒ‰éˆ•æ˜¯å¦æœ‰ aria-expanded',
                    test: () => {
                        const btn = document.getElementById('mobileMenuToggle');
                        return btn && btn.hasAttribute('aria-expanded');
                    }
                },
                {
                    name: 'é¸å–®æ˜¯å¦å­˜åœ¨',
                    test: () => {
                        return document.getElementById('mainMenu') !== null;
                    }
                },
                {
                    name: 'é®ç½©æ˜¯å¦å­˜åœ¨',
                    test: () => {
                        return document.getElementById('menuOverlay') !== null;
                    }
                },
                {
                    name: 'æ‡¸æµ®æŒ‰éˆ•æ˜¯å¦å­˜åœ¨',
                    test: () => {
                        return document.getElementById('floatingMenuBtn') !== null;
                    }
                },
                {
                    name: 'CSS æª”æ¡ˆæ˜¯å¦è¼‰å…¥',
                    test: () => {
                        const links = document.querySelectorAll('link[rel="stylesheet"]');
                        return Array.from(links).some(link => link.href.includes('mobile-menu-fix.css'));
                    }
                },
                {
                    name: 'JS æª”æ¡ˆæ˜¯å¦è¼‰å…¥',
                    test: () => {
                        const scripts = document.querySelectorAll('script');
                        return Array.from(scripts).some(script => script.src.includes('mobile-menu-fix.js'));
                    }
                }
            ];
            
            tests.forEach(test => {
                const passed = test.test();
                const className = passed ? 'result-pass' : 'result-fail';
                const icon = passed ? 'âœ“' : 'âœ—';
                results.innerHTML += `<div class="result-item ${className}">${icon} ${test.name}</div>`;
            });
        }

        // æ¸¬è©¦å¿«é€Ÿé»æ“Š
        function testRapidClick() {
            const btn = document.getElementById('mobileMenuToggle');
            if (!btn) return;
            
            alert('å°‡é€²è¡Œ 10 æ¬¡å¿«é€Ÿé»æ“Šæ¸¬è©¦ï¼Œè«‹è§€å¯Ÿé¸å–®æ˜¯å¦æ­£å¸¸é–‹é—œ');
            
            let count = 0;
            const interval = setInterval(() => {
                btn.click();
                count++;
                if (count >= 10) {
                    clearInterval(interval);
                    alert('å¿«é€Ÿé»æ“Šæ¸¬è©¦å®Œæˆï¼å¦‚æœé¸å–®ç‹€æ…‹æ­£å¸¸ï¼Œè¡¨ç¤ºæ¸¬è©¦é€šéã€‚');
                }
            }, 200);
        }

        // æ¸…é™¤çµæœ
        function clearResults() {
            document.getElementById('testResults').style.display = 'none';
            document.getElementById('testResults').innerHTML = '';
        }
    </script>
</body>
</html>
